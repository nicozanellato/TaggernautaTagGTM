___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Taggernauta Tag",
  "categories": ["UTILITY", "TAG_MANAGEMENT"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/jpeg;base64,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\u003d\u003d"
  },
  "description": "Tags monitor by Taggernauta Analytics",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Require the necessary APIs
const addEventCallback = require('addEventCallback');
const readFromDataLayer = require('copyFromDataLayer');
const sendPixel = require('sendPixel');
const getTimestamp = require('getTimestamp');
const getUrl = require('getUrl');
const getContainerVersion = require('getContainerVersion');

// Get the dataLayer event that triggered the tag
const event = readFromDataLayer('event');

// Add a timestamp to separate events named the same way from each other
const eventTimestamp = getTimestamp();

const batchHits = data.batchHits === 'yes';
const maxTags = data.maxTags;

// Utility for splitting an array into multiple arrays of given size
const splitToBatches = (arr, size) => {
  const newArr = [];
  for (let i = 0, len = arr.length; i < len; i += size) {
    newArr.push(arr.slice(i, i + size));
  }
  return newArr;
};

// The addEventCallback gets two arguments: container ID and a data object with an array of tags that fired
addEventCallback((ctid, eventData) => {

// Filter out tags that have the "exclude" metadata set to true
const tags = eventData.tags.filter(t => t.exclude !== 'true');

const containerId = getContainerVersion();
  
// If batching is enabled, split the tags into batches of the given size
const batches = batchHits ? splitToBatches(tags, maxTags) : [tags];

const pagePath = getUrl('path');  
const hostName = getUrl('host');
  
// For each batch, build a payload and dispatch to the endpoint as a GET request
batches.forEach(tags => {
    let payload = '?eventName=' + event + '&eventTimestamp=' + eventTimestamp + '&hostName=' + hostName + '&pagePath=' + pagePath + '&containerId=' + containerId.containerId;
    tags.forEach((tag, idx) => {
      const tagPrefix = '&tag' + (idx + 1);
      payload +=
        tagPrefix + 'id=' + tag.id +
        tagPrefix + 'nm=' + tag.name +
        //tagPrefix + 'c='  + tag.category 
        tagPrefix + 'st=' + tag.status +
        tagPrefix + 'et=' + tag.executionTime;
    });
  
  sendPixel("https://europe-west1-taggernauta.cloudfunctions.net/tag-monitor" + payload, null, null);
  });
});

// After adding the callback, signal tag completion
// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_metadata",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "event"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://europe-west1-taggernauta.cloudfunctions.net/tag-monitor*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: "// Require the necessary APIs\nconst addEventCallback = require('addEventCallback');\n\
  const readFromDataLayer = require('copyFromDataLayer');\nconst sendPixel = require('sendPixel');\n\
  const getTimestamp = require('getTimestamp');\nconst query = require('queryPermission');\n\
  const getUrl = require('getUrl');\nconst getContainerVersion = require('getContainerVersion');\n\
  const logToConsole = require('logToConsole');\n\n// Get the dataLayer event that\
  \ triggered the tag\nconst event = readFromDataLayer('event');\n\n// Add a timestamp\
  \ to separate events named the same way from each other\nconst eventTimestamp =\
  \ getTimestamp();\n\n//const endPoint = data.endPoint;\nconst batchHits = data.batchHits\
  \ === 'yes';\nconst maxTags = data.maxTags;\n\n// Utility for splitting an array\
  \ into multiple arrays of given size\nconst splitToBatches = (arr, size) => {\n\
  \  const newArr = [];\n  for (let i = 0, len = arr.length; i < len; i += size) {\n\
  \    newArr.push(arr.slice(i, i + size));\n  }\n  return newArr;\n};\n\n// The addEventCallback\
  \ gets two arguments: container ID and a data object with an array of tags that\
  \ fired\naddEventCallback((ctid, eventData) => {\n\n// Filter out tags that have\
  \ the \"exclude\" metadata set to true\nconst tags = eventData.tags.filter(t =>\
  \ t.exclude !== 'true');\n  \n// If batching is enabled, split the tags into batches\
  \ of the given size\nconst batches = batchHits ? splitToBatches(tags, maxTags) :\
  \ [tags];\n  \n// For each batch, build a payload and dispatch to the endpoint as\
  \ a GET request\nbatches.forEach(tags => {\n    let payload = '?eventName=' + event\
  \ + '&eventTimestamp=' + eventTimestamp;\n    tags.forEach((tag, idx) => {\n   \
  \   const tagPrefix = '&tag' + (idx + 1);\n      payload +=\n        tagPrefix +\
  \ 'id=' + tag.id +\n        tagPrefix + 'nm=' + tag.name +\n        tagPrefix +\
  \ 'st=' + tag.status +\n        tagPrefix + 'et=' + tag.executionTime;\n    });\n\
  \  if (tags.lenght){\n    //sendPixel(\"https://us-central1-gtmaudit-276413.cloudfunctions.net/tag_monitor\"\
  \ + payload, null, null);\n  }\n  });\n});\n\n// After adding the callback, signal\
  \ tag completion\n// Call data.gtmOnSuccess when the tag is finished.\ndata.gtmOnSuccess();"


___NOTES___

Created on 18/10/2020, 18:10:38


